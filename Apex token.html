<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Apex Token Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.min.js"></script>
  
  <style>
    body {
      background: #05070d;
      color: white;
      font-family: Arial;
      text-align: center;
    }
    
    button {
      padding: 12px 25px;
      margin: 10px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      background: #0072ff;
      color: white;
      font-weight: bold;
    }
    
    .card {
      background: #0c101c;
      padding: 20px;
      margin: 20px auto;
      width: 300px;
      border-radius: 10px;
      border: 1px solid #0072ff;
    }
  </style>
</head>

<body>
  
  <h1>⚡ APEX TOKEN</h1>
  
  <button onclick="connectWallet()">Connect Wallet</button>
  <button onclick="buyToken()">Buy on PancakeSwap</button>
  
  <div class="card">
    <h3>Wallet</h3>
    <p id="wallet">Not Connected</p>
  </div>
  
  <div class="card">
    <h3>BNB Balance</h3>
    <p id="bnbBalance">0</p>
  </div>
  
  <div class="card">
    <h3>APEX Balance</h3>
    <p id="tokenBalance">0</p>
  </div>
  
  <script>
    let provider;
    let signer;
    let userAddress;
    
    const tokenAddress = "0xB3a78c3f55Fc653992169F77cb10878D2cF1684f";
    
    // ABI mínima para pegar saldo
    const tokenABI = [
      "function balanceOf(address owner) view returns (uint256)",
      "function decimals() view returns (uint8)"
    ];
    
    async function connectWallet() {
      
      if (typeof window.ethereum === 'undefined') {
        alert("Install MetaMask");
        return;
      }
      
      await ethereum.request({ method: 'eth_requestAccounts' });
      
      provider = new ethers.providers.Web3Provider(window.ethereum);
      signer = provider.getSigner();
      userAddress = await signer.getAddress();
      
      document.getElementById("wallet").innerText = userAddress;
      
      loadBalances();
    }
    
    async function loadBalances() {
      
      // BNB Balance
      let balance = await provider.getBalance(userAddress);
      let bnb = ethers.utils.formatEther(balance);
      document.getElementById("bnbBalance").innerText = parseFloat(bnb).toFixed(4);
      
      // Token Balance
      const contract = new ethers.Contract(tokenAddress, tokenABI, provider);
      
      let decimals = await contract.decimals();
      let tokenBal = await contract.balanceOf(userAddress);
      
      let formatted = tokenBal / Math.pow(10, decimals);
      
      document.getElementById("tokenBalance").innerText = formatted.toFixed(2);
      
    }
    
    function buyToken() {
      
      window.open(
        "https://pancakeswap.finance/swap?outputCurrency=SEU_CONTRATO_AQUI",
        "_blank"
      );
      
    }
  </script>
  
</body>

</html>
