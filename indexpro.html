<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Apex Token</title>

<!-- Ethers -->
<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.min.js"></script>

<!-- WalletConnect -->
<script src="https://unpkg.com/@walletconnect/web3-provider@1.8.0/dist/umd/index.min.js"></script>

<!-- Web3Modal -->
<script src="https://unpkg.com/web3modal@1.9.12/dist/index.js"></script>

<style>
body{
margin:0;
font-family:Arial;
background:#0b0f19;
color:white;
}

header{
display:flex;
justify-content:space-between;
align-items:center;
padding:20px;
background:#111827;
}

button{
padding:10px 20px;
border:none;
border-radius:8px;
background:#2563eb;
color:white;
cursor:pointer;
font-weight:bold;
}

button:hover{
background:#1d4ed8;
}

.container{
padding:20px;
}

.grid{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
gap:20px;
}

.card{
background:#1f2937;
padding:20px;
border-radius:12px;
text-align:center;
}

.staking{
margin-top:30px;
background:#1f2937;
padding:20px;
border-radius:12px;
text-align:center;
}

input{
padding:10px;
border-radius:6px;
border:none;
margin:10px;
width:200px;
}
</style>
</head>
<body>

<header>
<h2>âš¡ APEX TOKEN</h2>
<button onclick="connectWallet()">Connect Wallet</button>
</header>

<div class="container">

<div class="grid">

<div class="card">
<h4>Wallet</h4>
<p id="wallet">Not connected</p>
</div>

<div class="card">
<h4>BNB Balance</h4>
<p id="bnb">0</p>
</div>

<div class="card">
<h4>APEX Balance</h4>
<p id="apex">0</p>
</div>

</div>

<div class="staking">
<h3>ðŸ”¥ Staking</h3>

<input type="number" id="stakeAmount" placeholder="Quantidade APEX">

<br>

<button onclick="stake()">Stake</button>
<button onclick="unstake()">Unstake</button>

<p>Staked: <span id="staked">0</span></p>
<p>Reward: <span id="reward">0</span></p>

</div>

</div>

<script>

const tokenAddress = "SEU_CONTRATO_TOKEN";
const stakingAddress = "SEU_CONTRATO_STAKING";

const tokenABI = [
"function balanceOf(address owner) view returns (uint256)",
"function decimals() view returns (uint8)",
"function approve(address spender, uint256 amount) returns (bool)"
];

const stakingABI = [
"function stake(uint256 amount)",
"function withdraw(uint256 amount)",
"function earned(address account) view returns(uint256)",
"function balanceOf(address account) view returns(uint256)"
];

let web3Modal;
let provider;
let signer;
let userAddress;

window.addEventListener("load", async () => {

const providerOptions = {
walletconnect: {
package: window.WalletConnectProvider.default,
options: {
rpc: {
56: "https://bsc-dataseed.binance.org/"
},
chainId: 56
}
}
};

web3Modal = new window.Web3Modal.default({
cacheProvider: false,
providerOptions
});

});

async function connectWallet(){

const instance = await web3Modal.connect();

provider = new ethers.providers.Web3Provider(instance);
signer = provider.getSigner();
userAddress = await signer.getAddress();

document.getElementById("wallet").innerText = userAddress;

checkNetwork();
loadData();

}

async function checkNetwork(){

const network = await provider.getNetwork();

if(network.chainId !== 56){
alert("Switch to BNB Smart Chain (BSC)");
}

}

async function loadData(){

const token = new ethers.Contract(tokenAddress, tokenABI, provider);
const staking = new ethers.Contract(stakingAddress, stakingABI, provider);

let decimals = await token.decimals();

let bnb = await provider.getBalance(userAddress);
bnb = ethers.utils.formatEther(bnb);
document.getElementById("bnb").innerText = parseFloat(bnb).toFixed(4);

let apex = await token.balanceOf(userAddress);
apex = apex / Math.pow(10, decimals);
document.getElementById("apex").innerText = apex.toFixed(2);

let staked = await staking.balanceOf(userAddress);
staked = staked / Math.pow(10, decimals);
document.getElementById("staked").innerText = staked.toFixed(2);

let reward = await staking.earned(userAddress);
reward = reward / Math.pow(10, decimals);
document.getElementById("reward").innerText = reward.toFixed(2);

}

async function stake(){

const token = new ethers.Contract(tokenAddress, tokenABI, signer);
const staking = new ethers.Contract(stakingAddress, stakingABI, signer);

let decimals = await token.decimals();
let amount = document.getElementById("stakeAmount").value;
let parsed = ethers.utils.parseUnits(amount, decimals);

await token.approve(stakingAddress, parsed);
await staking.stake(parsed);

alert("Stake realizado!");

}

async function unstake(){

const staking = new ethers.Contract(stakingAddress, stakingABI, signer);

let amount = document.getElementById("stakeAmount").value;
let parsed = ethers.utils.parseUnits(amount, 18);

await staking.withdraw(parsed);

alert("Unstake realizado!");

}

</script>

</body>
</html>

<input type="number" id="stakeAmount" placeholder="Quantidade APEX">
<button onclick="stake()">Stake</button>
<button onclick="unstake()">Unstake</button>

<p>Staked: <span id="staked">0</span></p>
<p>Recompensa: <span id="reward">0</span></p>
</div>

</div>

<script>

const tokenAddress = "SEU_CONTRATO_TOKEN";
const stakingAddress = "SEU_CONTRATO_STAKING";

const tokenABI = [
"function balanceOf(address owner) view returns (uint256)",
"function decimals() view returns (uint8)",
"function totalSupply() view returns (uint256)",
"function approve(address spender, uint256 amount) returns (bool)"
];

const stakingABI = [
"function stake(uint256 amount)",
"function withdraw(uint256 amount)",
"function earned(address account) view returns(uint256)",
"function balanceOf(address account) view returns(uint256)"
];

let provider;
let signer;
let userAddress;

async function connectWallet(){

if(!window.ethereum){
alert("Use MetaMask Browser or WalletConnect");
return;
}

provider = new ethers.providers.Web3Provider(window.ethereum);
await provider.send("eth_requestAccounts", []);
signer = provider.getSigner();
userAddress = await signer.getAddress();

loadData();
}

async function loadData(){

const token = new ethers.Contract(tokenAddress, tokenABI, provider);
const staking = new ethers.Contract(stakingAddress, stakingABI, provider);

let decimals = await token.decimals();

let balance = await token.balanceOf(userAddress);
balance = balance / Math.pow(10, decimals);
document.getElementById("balance").innerText = balance.toFixed(2);

let supply = await token.totalSupply();
supply = supply / Math.pow(10, decimals);
document.getElementById("supply").innerText = supply.toFixed(0);

let staked = await staking.balanceOf(userAddress);
staked = staked / Math.pow(10, decimals);
document.getElementById("staked").innerText = staked.toFixed(2);

let reward = await staking.earned(userAddress);
reward = reward / Math.pow(10, decimals);
document.getElementById("reward").innerText = reward.toFixed(2);

createChart();
}

async function stake(){

const token = new ethers.Contract(tokenAddress, tokenABI, signer);
const staking = new ethers.Contract(stakingAddress, stakingABI, signer);

let amount = document.getElementById("stakeAmount").value;
let decimals = await token.decimals();

let parsed = ethers.utils.parseUnits(amount, decimals);

await token.approve(stakingAddress, parsed);
await staking.stake(parsed);

alert("Staked successfully!");
}

async function unstake(){

const staking = new ethers.Contract(stakingAddress, stakingABI, signer);

let amount = document.getElementById("stakeAmount").value;
let parsed = ethers.utils.parseUnits(amount, 18);

await staking.withdraw(parsed);

alert("Unstaked!");
}

function createChart(){

new Chart(document.getElementById("chart"),{
type:"line",
data:{
labels:["Day1","Day2","Day3","Day4","Day5"],
datasets:[{
label:"PreÃ§o",
data:[0.001,0.002,0.0018,0.0025,0.003],
borderColor:"#2563eb"
}]
}
});

}

</script>

</body>
</html>
